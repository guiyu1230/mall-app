(self.webpackChunkmall_app=self.webpackChunkmall_app||[]).push([[747],{43146:function(le,I,n){"use strict";n.r(I),n.d(I,{default:function(){return ue}});var ie=n(57663),O=n(71577),se=n(71194),U=n(50146),V=n(93224),oe=n(71153),G=n(60331),B=n(57337),l=n(90636),b=n(11849),ce=n(34792),g=n(48086),x=n(3182),k=n(49101),j=n(67294),K=n(67265),W=n(41114),Y=n(37476),H=n(5966),D=n(86615),L=n(31199),J=n(64317),z=n(5436),N=function(a,d){var t=[];return t},y=N(1,100);function Q(u,a){return P.apply(this,arguments)}function P(){return P=(0,x.Z)((0,l.Z)().mark(function u(a,d){return(0,l.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(e,s){setTimeout(function(){var m=a.pageSize,f=m===void 0?20:m,v=a.current,h=v===void 0?1:v,R=f*(h-1),A=f*h,Z=y.slice(R,A);e({data:Z,success:!0,total:y.length})},1e3)}));case 1:case"end":return r.stop()}},u)})),P.apply(this,arguments)}function X(u,a){return E.apply(this,arguments)}function E(){return E=(0,x.Z)((0,l.Z)().mark(function u(a,d){return(0,l.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(e,s){setTimeout(function(){var m=a.id,f=y.findIndex(function(v){return v.id===m});y[f]=a,e()},1e3)}));case 1:case"end":return r.stop()}},u)})),E.apply(this,arguments)}function q(u,a){return S.apply(this,arguments)}function S(){return S=(0,x.Z)((0,l.Z)().mark(function u(a,d){return(0,l.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(e,s){setTimeout(function(){var m=y.length+1;y.unshift((0,b.Z)((0,b.Z)({id:m},a),{},{showTime:new Date})),e()},1e3)}));case 1:case"end":return r.stop()}},u)})),S.apply(this,arguments)}function _(u,a){return $.apply(this,arguments)}function $(){return $=(0,x.Z)((0,l.Z)().mark(function u(a,d){return(0,l.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(e,s){setTimeout(function(){var m=a.id,f=y.findIndex(function(v){return v.id===m});y.splice(f,1),e()},1e3)}));case 1:case"end":return r.stop()}},u)})),$.apply(this,arguments)}var c=n(85893),ee=["id","showTime"],re=function(){var u=(0,x.Z)((0,l.Z)().mark(function a(d){var t;return(0,l.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),e.prev=1,e.next=4,q((0,b.Z)({},d));case 4:return t(),g.ZP.success("\u6DFB\u52A0\u6210\u529F"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),t(),g.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},a,null,[[1,9]])}));return function(d){return u.apply(this,arguments)}}(),ne=function(){var u=(0,x.Z)((0,l.Z)().mark(function a(d,t){var r;return(0,l.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return r=g.ZP.loading("\u6B63\u5728\u914D\u7F6E"),s.prev=1,s.next=4,X((0,b.Z)((0,b.Z)({},t),d));case 4:return r(),g.ZP.success("\u914D\u7F6E\u6210\u529F"),s.abrupt("return",!0);case 9:return s.prev=9,s.t0=s.catch(1),r(),g.ZP.error("\u914D\u7F6E\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),s.abrupt("return",!1);case 14:case"end":return s.stop()}},a,null,[[1,9]])}));return function(d,t){return u.apply(this,arguments)}}(),ae=function(){var u=(0,x.Z)((0,l.Z)().mark(function a(d){var t;return(0,l.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.ZP.loading("\u6B63\u5728\u5220\u9664"),e.prev=1,e.next=4,_(d);case 4:return t(),g.ZP.success("\u5220\u9664\u6210\u529F"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),t(),g.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},a,null,[[1,9]])}));return function(d){return u.apply(this,arguments)}}(),te=function(){var a=(0,j.useState)(null),d=(0,B.Z)(a,2),t=d[0],r=d[1],e=(0,j.useState)(!1),s=(0,B.Z)(e,2),m=s[0],f=s[1],v=(0,j.useRef)(),h=(0,j.useRef)(),R=(0,j.useRef)({all:{color:"success",text:"\u5168\u6BB5"},middle:{color:"processing",text:"\u4E2D\u6BB5"},middleUp:{color:"green",text:"\u4E2D\u4E0A\u6BB5"},middleDown:{color:"blue",text:"\u4E2D\u4E0B\u6BB5"}}),A=[{title:"\u54C1\u540D",dataIndex:"wine",copyable:!0},{title:"\u9999\u578B",dataIndex:"wineType",valueEnum:{Fragrance:{text:"\u6E05\u9999\u578B"},strongAroma:{text:"\u6D53\u9999\u578B"},sauceAroma:{text:"\u9171\u9999"}}},{title:"\u6BB5\u4F4D",dataIndex:"tier",render:function(o,i){return i.tier?(0,c.jsx)(G.Z,{color:R.current[i.tier].color,children:R.current[i.tier].text}):null}},{title:"\u9152\u9F84",dataIndex:"wineAge",renderText:function(o){return o?"".concat(o,"\u5E74"):null}},{title:"\u9152\u7CBE\u5EA6",dataIndex:"alcoholicStrength",renderText:function(o){return o?"".concat(o,"%"):null}},{title:"\u5355\u4F4D",dataIndex:"unit",valueEnum:{jin:{text:"\u65A4"},kilogram:{text:"\u516C\u65A4"},piece:{text:"\u4EF6"},pot:{text:"\u575B"}}},{title:"\u6210\u672C\u5355\u4EF7",dataIndex:"costPrice",renderText:function(o){return o?"".concat(o,"\u5143"):null}},{title:"\u9500\u552E\u5355\u4EF7",dataIndex:"salePrice",renderText:function(o){return o?"".concat(o,"\u5143"):null}},{title:"\u4E0A\u67B6\u65F6\u95F4",dataIndex:"showTime",valueType:"dateTime"},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(o,i){return[(0,c.jsx)("a",{onClick:function(){var w;f(!0);var p=i.id,M=i.showTime,C=(0,V.Z)(i,ee);r(i),h==null||(w=h.current)===null||w===void 0||w.setFieldsValue(C)},children:"\u4FEE\u6539"},"update"),(0,c.jsx)("a",{onClick:function(){U.Z.confirm({title:"\u786E\u5B9A\u662F\u5426\u5220\u9664".concat(i.wine),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onOk:function(){var w=(0,x.Z)((0,l.Z)().mark(function M(){var C;return(0,l.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,ae(i);case 2:C=F.sent,C&&v.current&&v.current.reload();case 4:case"end":return F.stop()}},M)}));function p(){return w.apply(this,arguments)}return p}()})},children:"\u5220\u9664"},"delete")]}}];return(0,c.jsxs)(K.ZP,{children:[(0,c.jsx)(W.ZP,{headerTitle:"\u9152\u54C1\u4FE1\u606F",actionRef:v,rowKey:"id",dateFormatter:"string",search:!1,toolBarRender:function(){return[(0,c.jsxs)(O.Z,{type:"primary",onClick:function(){var i;r(null),f(!0),h==null||(i=h.current)===null||i===void 0||i.resetFields()},children:[(0,c.jsx)(k.Z,{})," \u65B0\u5EFA"]},"primary")]},request:Q,columns:A}),(0,c.jsxs)(Y.Y,{title:t?"\u4FEE\u6539\u9152\u54C1":"\u65B0\u589E\u9152\u54C1",width:"800px",layout:"horizontal",labelCol:{span:4},formRef:h,wrapperCol:{span:14},visible:m,onVisibleChange:f,onFinish:function(){var Z=(0,x.Z)((0,l.Z)().mark(function o(i){var T;return(0,l.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(console.log(i),T=!1,!t){p.next=8;break}return p.next=5,ne(i,t);case 5:T=p.sent,p.next=11;break;case 8:return p.next=10,re(i);case 10:T=p.sent;case 11:T&&(r(null),f(!1),v.current&&v.current.reload());case 12:case"end":return p.stop()}},o)}));return function(o){return Z.apply(this,arguments)}}(),children:[(0,c.jsx)(H.Z,{rules:[{required:!0,message:"\u9152\u54C1\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}],label:"\u9152\u54C1\u540D",name:"wine",placeholder:"\u9152\u54C1\u540D\u5FC5\u586B"}),(0,c.jsx)(D.Z.Group,{label:"\u9999\u578B",radioType:"button",name:"wineType",options:[{value:"Fragrance",label:"\u6E05\u9999\u578B"},{value:"strongAroma",label:"\u6D53\u9999\u578B"},{value:"sauceAroma",label:"\u9171\u9999\u578B"}]}),(0,c.jsx)(D.Z.Group,{label:"\u6BB5\u4F4D",radioType:"button",name:"tier",options:[{value:"all",label:"\u5168\u6BB5"},{value:"middle",label:"\u4E2D\u6BB5"},{value:"middleUp",label:"\u4E2D\u4E0A\u6BB5"},{value:"middleDown",label:"\u4E2D\u4E0B\u6BB5"}]}),(0,c.jsx)(L.Z,{name:"wineAge",label:"\u9152\u9F84"}),(0,c.jsx)(L.Z,{name:"alcoholicStrength",label:"\u9152\u7CBE\u5EA6"}),(0,c.jsx)(J.Z,{options:[{value:"jin",label:"\u65A4"},{value:"kilogram",label:"\u516C\u65A4"},{value:"piece",label:"\u4EF6"},{value:"pot",label:"\u575B"}],name:"unit",label:"\u5546\u54C1\u5355\u4F4D"}),(0,c.jsx)(z.Z,{rules:[{required:!0,message:"\u6210\u672C\u5355\u4EF7\u4E3A\u5FC5\u586B\u9879"}],label:"\u6210\u672C\u5355\u4EF7",placeholder:"\u6210\u672C\u5355\u4EF7\u5FC5\u586B",name:"costPrice"}),(0,c.jsx)(z.Z,{rules:[{required:!0,message:"\u9500\u552E\u5355\u4EF7\u4E3A\u5FC5\u586B\u9879"}],label:"\u9500\u552E\u5355\u4EF7",placeholder:"\u9500\u552E\u5355\u4EF7\u5FC5\u586B",name:"salePrice"})]})]})},ue=te}}]);
